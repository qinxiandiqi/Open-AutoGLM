name: "今日头条定时监控"
description: "持续监控今日头条应用健康状态"

# 模型配置
model:
  base_url: "https://open.bigmodel.cn/api/paas/v4"
  model_name: "autoglm-phone"
  # api_key: "${ZHIPU_API_KEY}"  # 从环境变量读取

# 通知配置（巡查失败时发送飞书通知）
notifications:
  lark:
    enabled: true  # 启用飞书通知
    webhook_url: "${FEISHU_WEBHOOK_URL}"  # 从环境变量读取飞书 Webhook URL
    mention_users:  # 可选：@提醒的用户 open_id 列表
      # - "ou_xxx"  # 示例用户 open_id，替换为实际值
      # - "ou_yyy"

# 定时巡查配置
scheduled_patrol:
  enabled: true
  success_interval: 300  # 成功后5分钟再次巡查
  failure_interval: 300  # 失败后5分钟重试
  max_runs: null         # 无限次，直到手动停止

# 自动巡查配置
auto_patrol:
  enabled: true
  target_app: "今日头条"

  # 探索限制
  max_pages: 1
  max_depth: 2
  max_time: 180  # 3分钟

  # 安全约束
  forbidden_actions:
    - "删除"
    - "支付"
    - "购买"
    - "卸载"
    - "清空数据"
    - "退出登录"

  # 每个页面的核心功能测试
  test_actions:
    - "向下滚动查看更多内容"
    - "向上滚动返回顶部"
    - "检查页面是否有刷新按钮"
    - "检查页面是否有搜索功能"

  # 探索策略
  explore_strategy: "breadth_first"  # 先探索所有一级页面

  # 输出控制
  save_discovered_pages: true
  screenshot_each_page: false

# 执行配置
execution:
  device_id: null
  lang: "cn"
  continue_on_error: false
  close_app_after_patrol: true

# 输出配置
output:
  save_screenshots: true
  screenshot_dir: "patrol_screenshots/jinritoutiao_scheduled"
  report_dir: "patrol_reports"
  verbose: true
